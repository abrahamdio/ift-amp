<!doctype html>
<html âš¡4email>
<head>
  <meta charset="utf-8">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
  <script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></script>
  <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.2.js"></script>
  <script async custom-element="amp-selector" src="https://cdn.ampproject.org/v0/amp-selector-0.1.js"></script>
  <style amp4email-boilerplate>body{visibility:hidden}</style>
</head>
<body>
  Check out these latest deals from our store!
    <form method="post" action-xhr="https://ift-amp.herokuapp.com/addTimeslot" on="submit-success:myList.refresh">
        <input type="text"
            name="timeslot"
            placeholder="10AM-11AM"
            required>
        <input type="submit"
            value="Add Timeslot">
        <button on="tap:myList.refresh">Refresh List</button>
        <amp-list id="myList" src="https://ift-amp.herokuapp.com/timeslot" layout="fixed-height" height="80">
            <template type="amp-mustache">
                <div>{{timeSlot}} -
                    {{#scheduled}}
                        <b>Booked</b>
                    {{/scheduled}}
                    {{^scheduled}}
                        Available
                    {{/scheduled}}    
                </div>
            </template>
        </amp-list>
        <div submit-success>
            <template type="amp-mustache">
                Success!
            </template>
        </div>
        <div submit-error>
            <template type="amp-mustache">
                Error!
            </template>
        </div>
    </form>
</body>
</html>
